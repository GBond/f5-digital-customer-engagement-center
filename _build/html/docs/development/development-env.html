<!DOCTYPE html>
<div id="clouddocs-header">
  <div class="container-fluid">
    <div class="row corp-header">
      <div class="container corp-header">
        <div class="container corp-menu">
          <ul>
            <li><a href="https://f5.com" class="internalLink">F5.com</a></li>
            <li><a href="https://github.com/F5Networks" class="externalLink">GitHub</a></li>
            <li><a href="https://devcentral.f5.com" class="internalLink">Devcentral</a></li>
            <li><a href="https://support.f5.com" class="internalLink">Support</a></li>
          </ul>
        </div>
      </div>
    </div>

    <script async="async"
      src="https://consent.trustarc.com/notice?domain=f5.com&amp;c=teconsent&amp;text=true&amp;gtm=1" crossorigin=""
      id="truste_0.12182038258598205"></script>

    <div class="row pageHeader">
      <div class="container stat">
        <div class="col-xs-12 stat">
          <a class="internalLink" href="https://f5.com">
            <img class="logo" src="https://cdn.f5.com/websites/support/assets/images/logo.svg" width="50" height="44"
              alt="F5 Networks" title="F5 Networks" border="0">
          </a>
          <ul id="MainMenu" class="main-menu">
            <li data-submenu-id="products">
              <a data-link-type="nav: main" href="#" class="currentURL">Products
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>
              <div class="menu-panel soft-hide" id="products-submenu">
                <div class="container">
                  <ul class="submenu">
                    <li>
                      <span class="a-mm-h">BIG-IP Extensibility</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-extension/latest" data-link-type="Nav: Mega">F5
                            Application Services Extension 3</a></li>
                        <li><a href="https://clouddocs.f5.com/products/agc/latest" data-link-type="Nav: Mega">BIG-IP APM Access Guided
                            Configuration</a></li>
                        <li><a href="https://clouddocs.f5.com/products/iapp/iapp-lx/latest" data-link-type="Nav: Mega">iApps LX/iControl LX</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-declarative-onboarding/latest"
                            data-link-type="Nav: Mega">F5 Declarative Onboarding</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-telemetry-streaming/latest" data-link-type="Nav: Mega">F5
                            Telemetry Streaming</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-cloud-failover/latest" data-link-type="Nav: Mega">F5 Cloud
                            Failover</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-templates/latest/" data-link-type="Nav: Mega">F5
                            Application Services Templates</a></li>
                      </ul>
                    </li>


                    <li class="divider"></li>
                    <li><span class="a-mm-h">Container Ingress Services</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/containers/latest/" data-link-type="Nav: Mega">F5 BIG-IP Controller for
                            Kubernetes/OpenShift</a></li>
                      </ul>
                      <span class="a-mm-h">Network Function Virtualization</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud/nfv/latest" data-link-type="Nav: Mega">F5 VNF Manager</a></li>
                      </ul>
                      <span class="a-mm-h">SDK</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/sdk/f5-cli" target="_blank">F5 CLI</a></li>
                        <li><a href="https://clouddocs.f5.com/sdk/f5-sdk-python" target="_blank">F5 SDK Python</a></li>
                      </ul>
                    </li>



                    <li class="divider"></li>
                    <li>
                      <span class="a-mm-h">OpenStack</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/openstack/agent/latest" data-link-type="Nav: Mega">F5 Agent - OpenStack
                            Neutron</a></li>
                        <li><a href="https://clouddocs.f5.com/products/openstack/lbaasv2-driver/latest" data-link-type="Nav: Mega">F5 Driver -
                            OpenStack LBaaS</a></li>
                        <li><a href="https://clouddocs.f5.com/products/openstack/heat-plugins/latest" data-link-type="Nav: Mega">F5 Plugins -
                            OpenStack Heat</a></li>
                      </ul>

                      <span class="a-mm-h">Ecosystems Integrations</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/f5-aci-servicecenter/latest" data-link-type="Nav: Mega">F5 ACI ServiceCenter</a>
                        </li>
                      </ul>


                    </li>
                    <li class="divider"></li>
                    <li><span class="a-mm-h">Orchestration</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/orchestration/ansible/devel" target="_blank">F5 Modules for Ansible</a>
                        </li>
                        <li><a href="https://github.com/F5Networks/f5-aws-cloudformation" target="_blank"
                            class="externalLink">F5 Templates for AWS CloudFormation</a> (GitHub)</li>
                        <li><a href="https://github.com/F5Networks/f5-azure-arm-templates" target="_blank"
                            class="externalLink">F5 Templates for Azure ARM</a> (GitHub)</li>
                        <li><a href="https://github.com/F5Networks/f5-google-gdm-templates" target="_blank"
                            class="externalLink">F5 Templates for Google Cloud Deployment Manager</a> (GitHub)</li>
                        <li><a href="https://clouddocs.f5.com/products/templates/openstack-heat/latest" data-link-type="Nav: Mega">F5 Templates
                            for OpenStack Heat</a></li>
                        <li><a href="https://clouddocs.f5.com/products/orchestration/terraform/latest/" data-link-type="Nav: Mega">F5 Resources
                            for Terraform Provider</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>

            <!--- NEW -->
            <li>
              <a href="#" class="currentURL">APIs
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>

              <div class="menu-panel soft-hide" id="APISubmenu">
                <div class="container">
                  <ul class="submenu">
                    <li>
                      <span class="a-mm-h"></span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/big-iq/mgmt-api/latest/" data-link-type="Nav: Mega">F5 BIG-IQ API</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/api/iapps/">F5 BIG-IP iApps</a></li>
                        <li><a href="https://clouddocs.f5.com/api/irules">F5 BIG-IP iRules API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/irules-lx">F5 BIG-IP iRulesLX API</a></li>
                      </ul>
                    </li>

                    <li class="divider"></li>

                    <li>
                      <span class="a-mm-h"></span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/api/icontrol-rest">F5 BIG-IP iControlREST API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/icontrol-soap/">F5 BIG-IP iControl API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/ihealth/">F5 iHealth API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/tmsh">F5 tmsh scripting API</a></li>
                      </ul>
                    </li>

                  </ul>
                </div>
              </div>
            </li>




            <li>
              <a href="#" class="currentURL">Cloud &amp; Container
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>

              <div class="menu-panel soft-hide" id="ContainersSubmenu">
                <div class="container">
                  <ul class="submenu col-sm-11">
                    <li class="third"><span class="a-mm-h">Cloud Services</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-GS-About.html"
                            data-link-type="Nav: Mega">Get Started</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-Beacon-About.html"
                            data-link-type="Nav: Mega">Beacon</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-DNS-About.html"
                            data-link-type="Nav: Mega">DNS Cloud Service</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-GSLB-About.html"
                            data-link-type="Nav: Mega">DNS Load Balancer Cloud Service</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-Essential.App.Protect-About.html"
                            data-link-type="Nav: Mega">Essential App Protect Service</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>
                    <li class="third"><span class="a-mm-h">Clouds</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/aws_index.html" data-link-type="Nav: Mega">AWS</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/azure_index.html" data-link-type="Nav: Mega">Azure</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/google_index.html" data-link-type="Nav: Mega">Google Cloud</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/cloud/openstack/" data-link-type="Nav: Mega">OpenStack</a></li>
                      </ul>
                      <!-- unnecessary right now>
                    <span class="seemore"><a data-link-type="Nav: Mega" href="/cloud/">See all </a></span>
                    <-->
                    </li>
                    <li class="divider"></li>
                    <li class="third"><span class="a-mm-h">Containers</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/containers/latest/userguide/kubernetes/" data-link-type="Nav: Mega">Kubernetes</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/containers/latest/userguide/openshift/" data-link-type="Nav: Mega">OpenShift</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
            <li>
              <a href="#" class="currentURL">Resources
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>
              <div class="menu-panel soft-hide" id="UPCProgramSubmenu">
                <div class="container">
                  <ul class="submenu col-sm-11">
                    <li class="third">
                      <span class="a-mm-h">Downloads</span>
                      <ul>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://hub.docker.com/r/f5networks/"
                            class="internalLink externalLink">Docker Hub</a></li>
                        <li><a target="_blank" data-link-type="Nav: Mega"
                            href="https://store.docker.com/images/f5networks-asp"
                            class="internalLink externalLink">Docker Store</a></li>
                      </ul>
                      <span class="a-mm-h">OpenSource</span>
                      <ul>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5Networks"
                            class="internalLink externalLink">F5Networks on GitHub</a></li>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5DevCentral"
                            class="internalLink externalLink">F5DevCentral on GitHub</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>
                    <li class="third">
                      <span class="a-mm-h">Training &amp; Labs</span>
                      <ul>
                        <li>
                          <p>Learn how to get the most out of the F5 platform</p>
                        </li>
                        <li><a href="https://clouddocs.f5.com/training/community">Community</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>

                    <li class="third">
                      <a href="//university.f5.com" class="a-mm-h internalLink" target="_blank"
                        data-link-type="Nav: Mega">F5 University</a>
                      <ul>
                        <li>
                          <p>Get up to speed with free self-paced courses</p>
                        </li>
                      </ul>
                      <a data-ng-href="https://devcentral.f5.com" class="a-mm-h internalLink" target="_blank"
                        data-link-type="Nav: Mega" href="https://devcentral.f5.com">DevCentral</a>
                      <ul>
                        <li>
                          <p>Join the community of 250,000+ technical peers</p>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
          </ul>
        </div>

        <div class="col-xs-12 stat">
          <div class="topLinks">
            <span class="glyphicon glyphicon-search upc-search" id="search-toggle" style="display: none;"></span>
          </div>
        </div>
      </div>
    </div>
  </div> <!-- /container-fluid -->
</div>
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Development environment &#8212; F5 Digital Customer Engagement Center 0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />

  
    

  
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="dismiss">
      <button type="button" class="btn btn-info navbar-btn site-hidden">
        <i class="fa fa-align-justify"></i>
      </button>
    </div>
    <div id="sidebar" class="section-nav">
      
      <nav class="nav-sidebartoc">

        
        <h5>F5 Digital Customer Engagement Center 0.1 </h5>
        
<div id="searchbox" role="search">
  <form class="search" action="../../search.html" method="get">
    <input type="text" class="search" name="q" placeholder=" Search..." />
    <button type="submit" class="btn btn-info navbar-btn"><i class="fa fa-search"></i></button>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        <hr>
        <h5>Current Page</h5>
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Development environment</a><ul>
<li><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li><a class="reference internal" href="#choosing-an-ide">Choosing an IDE</a></li>
<li><a class="reference internal" href="#rest-communication">REST communication</a></li>
<li><a class="reference internal" href="#virtualization-tools">Virtualization tools</a></li>
<li><a class="reference internal" href="#docker">Docker</a></li>
<li><a class="reference internal" href="#local-ansible-source-copy">Local Ansible source copy</a><ul>
<li><a class="reference internal" href="#merging-from-other-contributors">Merging from other contributors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#f5ansible-command">f5ansible command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#questions">Questions</a></li>
</ul>

         </span>
        <hr>
        <h5>Site Contents</h5>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/getting_started.html">Getting started</a></li>
</ul>
<p class="caption"><span class="caption-text">Solutions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../solutions/delivery/delivery_index.html">Application Delivery controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../solutions/security/security_index.html">Security</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer's Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting-involved.html">How to get involved</a></li>
<li class="toctree-l1"><a class="reference internal" href="guidelines.html">Guidelines</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>

  
  <div class="main active" id="content">
    <article class="docs-container site-article-inner">
            <nav class="site-breadcrumb-nav site-nav">
          <ul class="site-breadcrumb-list">
            <li class="breadcrumb-item"><button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn site-hidden"><i class="fa fa-align-justify"></i></button>&#x20 <a href="/">CloudDocs Home</a> &gt; <a href="../../index.html">F5 Digital Customer Engagement Center </a> &gt; Development environment</li>
          </ul>
      </nav>
      

    
  <div class="section" id="development-environment">
<h1>Development environment<a class="headerlink" href="#development-environment" title="Permalink to this headline">¶</a></h1>
<p>This document covers development tools that make developing F5 Ansible modules significantly easier.</p>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>This document assumes that you are working on a *nix, or *nix-like environment.</p>
<p>The workstation in the examples is a Mac running Sierra (10.12.6). Some of the steps will not be relevant to other environments. When that happens, it will be noted.</p>
<p>Amongst the topics of this document are the following:</p>
<ul class="simple">
<li><p>Choosing an IDE</p></li>
<li><p>REST communication</p></li>
<li><p>Virtualization tools</p></li>
<li><p>Docker</p></li>
<li><p>Getting the source</p></li>
<li><p>sudo ifconfig lo0 -alias 1.2.3.4</p></li>
</ul>
<p>This document ultimately serves as a gateway to all the other development-related documents on this site. You will be unable to follow the other development documents without having the setup outlined here.</p>
</div>
<div class="section" id="choosing-an-ide">
<h2>Choosing an IDE<a class="headerlink" href="#choosing-an-ide" title="Permalink to this headline">¶</a></h2>
<p>F5 uses the PyCharm IDE to write the Ansible modules.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.jetbrains.com/pycharm/download/">https://www.jetbrains.com/pycharm/download/</a></p></li>
</ul>
<p>The developers use the Professional edition, but there is also a Community edition available.</p>
<p>You can use other editors as you see fit, but this document uses the above editor.</p>
<p>A vanilla installation of PyCharm is sufficient.</p>
<p>With an editor in place, it is time for you to get a tool that will facilitate your ability to speak with the F5 device’s REST API.</p>
</div>
<div class="section" id="rest-communication">
<h2>REST communication<a class="headerlink" href="#rest-communication" title="Permalink to this headline">¶</a></h2>
<p>You can use a variety of tools to introspect a REST API, but Postman is the one that we used for the F5 Ansible modules.</p>
<p>You can use this tool in two ways:</p>
<ul class="simple">
<li><p>As a way to communicate with F5 devices during development</p></li>
<li><p>As a way for contributors to provide API workflows to the Ansible module developers</p></li>
</ul>
<p>You can download Postman from the following URL.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.getpostman.com/">https://www.getpostman.com/</a></p></li>
</ul>
<p>It comes in two parts. First, there is the <cite>postman</cite> tool itself which is a GUI tool that you can use to interact with remote REST APIs. Second, there is a CLI tool called <cite>newman</cite> which you can use to run batches of API calls. These batches are usually in the form of what Postman refers to as “Collections”.</p>
<p>We do not use <cite>newman</cite>.</p>
</div>
<div class="section" id="virtualization-tools">
<h2>Virtualization tools<a class="headerlink" href="#virtualization-tools" title="Permalink to this headline">¶</a></h2>
<p>For the primary needs of development and test we use VE (Virtual Edition) instances of F5 product to do our work.</p>
<p>To run these VE products, you have two options:</p>
<ul class="simple">
<li><p>OpenStack</p></li>
<li><p>Virtualbox/VMWare/some local solution</p></li>
</ul>
<p>You options are limited to the platform that you choose to do development on. Mac and hardware-based Linux installations have the largest breadth of options. We’ll explain why this is, shortly.</p>
<p>As mentioned, all development platforms can support OpenStack. This is because our
usage of OpenStack’s client libraries is constrained to the Docker dev/test
containers. Once you are in the container, you should have all the tools necessary
to perform your work.</p>
<p>You can use the OpenStack tools by using the “plumbing” commands;
<cite>openstack stack create</cite>, <cite>openstack server create</cite>, etc. Or, you can use the porcelain commands; <cite>f5ansible harness-create</cite>, <cite>f5ansible harness-delete</cite>,
etc. F5 recommends that you use the porcelain commands.</p>
<p>I also mentioned that, for certain platforms, you have access to local dev tools.
I specifically mentioned Mac and hardware Linux because there is a limitation in
Windows in which you can only run one hypervisor.</p>
<p>Docker for Windows requires that HyperV be turned on in Windows. However, doing this
prevents you from using Virtualbox. You can, alternatively, use HyperV itself in
Vagrant, but at this time this is not a method that works by the development team. YMMV.</p>
<p>If you are using the aforementioned Mac or hardware Linux, we provide both public
and private (internal) copies of Vagrantfiles for you to use.</p>
<p>For public Vagrantfiles, refer to the following URL</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/f5devcentral/f5-vagrant-files">https://github.com/f5devcentral/f5-vagrant-files</a></p></li>
</ul>
<p>For private Vagrantfiles, refer to your F5 colleague.</p>
</div>
<div class="section" id="docker">
<h2>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h2>
<p>Since the F5 Ansible modules are written in Python, it’s required that we have
the different installations of Python available to us. To do this, we provide
a <cite>docker-compose.yaml</cite> file that has all the necessary Python environments.</p>
<p><cite>docker-compose</cite> <em>should</em> come with docker by default. If not, you can install it
by following the instructions here.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.docker.com/compose/install/">https://docs.docker.com/compose/install/</a></p></li>
</ul>
<p>To make use of this requires the following two steps.</p>
<p>First, you will need to build the initial containers. You do not need to rebuild containers frequently; only if we change the base <cite>Dockerfile</cite>.</p>
<p>To build the initial container, you will want to know what the existing Python
environments that we support are.</p>
<p>You can get this information with the following command</p>
<ul class="simple">
<li><p><cite>docker-compose -f devtools/docker-compose.yaml config –services</cite></p></li>
</ul>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>ansible-dev<span class="o">)</span> SEA-ML-RUPP1:f5-ansible trupp$ docker-compose -f devtools/docker-compose.yaml config --services
docker-compose -f devtools/docker-compose.yaml config --services
py2.7.10
py3.5.4
py3.6.2
<span class="o">(</span>ansible-dev<span class="o">)</span> SEA-ML-RUPP1:f5-ansible trupp$
</pre></div>
</div>
<p>Once you have chosen the environment that you want, you can proceed to build.
Suppose you were interested in Python 3.6.2. You could build that development
environment with the following command.</p>
<ul class="simple">
<li><p><cite>docker-compose -f devtools/docker-compose.yaml build py3.6.2</cite></p></li>
</ul>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>ansible-dev<span class="o">)</span> SEA-ML-RUPP1:f5-ansible trupp$ docker-compose -f devtools/docker-compose.yaml build --no-cache py3.6.2
docker-compose -f devtools/docker-compose.yaml build py3.6.2
Building py3.6.2
Step <span class="m">1</span>/11 : FROM python:2.7
 ---&gt; 416af6c21fa5
...
Removing intermediate container 32dce77d8634
Step <span class="m">11</span>/11 : CMD <span class="o">[</span><span class="s1">&#39;/bin/bash&#39;</span><span class="o">]</span>
 ---&gt; Running <span class="k">in</span> dc5557ae0583
 ---&gt; f6684c7280f9
Removing intermediate container dc5557ae0583

Successfully built f6684c7280f9
Successfully tagged python:3.6
<span class="o">(</span>ansible-dev<span class="o">)</span> SEA-ML-RUPP1:f5-ansible trupp$
</pre></div>
</div>
<p>Building will take a minute or two the first time that you do it. After your
initial build, you will no longer need to re-build the container unless we
specifically change the <cite>Dockerfile</cite> or <cite>docker-compose.yaml</cite> file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I am deliberately using the <cite>–no-cache</cite> argument. This will cause the
build to take slightly longer because it will not be re-using existing Docker
layers. The upside, is that you do not need to be concerned with any old artifacts
from former layers sticking around to cause problems with the build.</p>
</div>
<p>Finally, to make use of the new container, you can use the <cite>run</cite> argument to
<cite>docker-compose</cite>, instead of the <cite>build</cite> argument.</p>
<ul class="simple">
<li><p><cite>docker-compose -f devtools/docker-compose.yaml run py3.6.2</cite></p></li>
</ul>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>ansible-dev<span class="o">)</span> SEA-ML-RUPP1:f5-ansible trupp$ docker-compose -f devtools/docker-compose.yaml run py3.6.2
docker-compose -f devtools/docker-compose.yaml run py3.6.2
root@cd71daf91439:/here#
</pre></div>
</div>
<p>You will immediately be dropped into the container environment. From within this
container, you can run all the Ansible/py.test/etc commands that you need to do
development of the <cite>f5-ansible</cite> source code.</p>
<p>Also, it should be noted that you can continue to use external development tools
(like IDEs) and all the changes you make in them will be immediately reflected
in your container environment. This is made possible by a bound volume in your
container that references the <cite>f5-ansible</cite> source tree.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Local development usually happens with local F5 product running in Virtualbox
VMs. The tools for doing this are not packaged in this container, nor are the
Vagrantfiles for bringing up those devices. If you are external to F5, we
provide means to make your own at the following repositories</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/f5devcentral/f5-packer-templates">https://github.com/f5devcentral/f5-packer-templates</a></p></li>
<li><p><a class="reference external" href="https://github.com/f5devcentral/f5-vagrant-files">https://github.com/f5devcentral/f5-vagrant-files</a></p></li>
</ul>
<p>Internal F5 engineers can contact the maintainers of this code-base for
pointers on internal resources that are available.</p>
</div>
</div>
<div class="section" id="local-ansible-source-copy">
<h2>Local Ansible source copy<a class="headerlink" href="#local-ansible-source-copy" title="Permalink to this headline">¶</a></h2>
<p>It is required that you have a locally available source copy of the Ansible upstream
codebase. To do this, you must do the following</p>
<ol class="arabic simple">
<li><p>In Github, create a fork of the Ansible codebase. You can find this codebase here <a class="reference external" href="https://github.com/ansible/ansible">https://github.com/ansible/ansible</a>. You can use the <cite>Fork</cite> button in the top right of
the screen to fork it. Please fork it to your __personal__ Github
account.</p></li>
<li><p>Clone your fork to the <cite>local/</cite> directory in this (f5-ansible) source tree. You can do this like so. <cite>git clone git&#64;github.com:USERNAME/ansible.git local/ansible</cite>.
Replace <cite>USERNAME</cite> with your Github username.</p></li>
<li><p>Add a <cite>git</cite> remote pointing to the “upstream” ansible source tree. You can do this
from __within__ the <cite>local/ansible/</cite> directory. From there, issue this command,
<cite>git remote add upstream https://github.com/ansible/ansible</cite></p></li>
</ol>
<p>With this setup in place, you now have the ability to do the following</p>
<ul class="simple">
<li><p>Copy f5-ansible source code “upstream” so that you can merge it into Ansible</p></li>
<li><p>Re-create the integration test playbook that Ansible uses for <cite>bigip_*</cite> modules.</p></li>
<li><p>Run all upstream PR tests that you need to run when upstreaming a new module to
Ansible core.</p></li>
</ul>
<p>We will add more things that you “can do” as they become appropriate.</p>
<div class="section" id="merging-from-other-contributors">
<h3>Merging from other contributors<a class="headerlink" href="#merging-from-other-contributors" title="Permalink to this headline">¶</a></h3>
<p>At times it may be necessary to track other contributors source trees and test
their fixes.</p>
<p>The times that this is particularly import are,</p>
<ul class="simple">
<li><p>When the contributor has changed something in module_utils/ related to F5
(for example f5_utils.py or in f5networks/).</p></li>
<li><p>When the contributor has changed something in a plugin that is related to F5
(for example an action or terminal plugin).</p></li>
</ul>
<p>The reason that the procedure below is important is because it allows you to test
their changes without needing to care about exposing any internal services (such
as testing harnesses) to the outside world. Since that is strictly forbidden, it’s
easier to just do the following.</p>
<ul>
<li><p>With the above local checkout of the Ansible source code in place, start by
changing into that source code directory and adding a git <cite>remote</cite> for the
repo that you want to test stuff from.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> local/ansible
git remote add CONTRIBUTOR https://github.com/CONTRIBUTOR/ansible.git<span class="sb">`</span>
</pre></div>
</div>
</li>
<li><p>Next, fetch the content of their repository so that you can use it locally</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git fetch CONTRIBUTOR
</pre></div>
</div>
</li>
<li><p>Next, ask the contributor which branch they have been doing their development
on. Suppose its name was <cite>feature.foo-bar-baz</cite>. With this information in mind,
you would next checkout the given branch and supply the <cite>–track</cite> argument to
git. This will create a local copy of the branch just for you, and will
additionally configure <cite>git</cite> so that a <cite>git pull</cite> will pull directly from the
CONTRIBUTOR’s repo and specific branch you are using.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git checkout --track CONTRIBUTOR/feature.foo-bar-baz
</pre></div>
</div>
</li>
<li><p>You are have the CONTRIBUTOR source at the ready. It is recommended that you
install it in a separate <cite>virtualenv</cite>. We can make use of the <cite>mkvirtualenv</cite>
command for this. Note that I am referencing the <cite>requirements.test.txt</cite> file
from the <cite>f5-ansible</cite> repository.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkvirtualenv ansible-CONTRIBUTOR
pip install -r ../../requirements.test.txt
</pre></div>
</div>
</li>
<li><p>With your virtualenv created, install the CONTRIBUTORS branch that you checked
out earlier. Replace F5_ANSIBLE_PATH with the local path to your f5-ansible
fork.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install file:///F5_ANSIBLE_PATH/local/ansible
</pre></div>
</div>
</li>
<li><p>You are now fully ready to test anything that the CONTRIBUTOR wants you to
test.</p></li>
</ul>
</div>
</div>
<div class="section" id="f5ansible-command">
<h2>f5ansible command<a class="headerlink" href="#f5ansible-command" title="Permalink to this headline">¶</a></h2>
<p>This repository provides a convenience command for you to use both inside and outside
the dev/test containers in this repo.</p>
<p>The command is called <cite>f5ansible</cite> and it is in the <cite>devtools/bin</cite> directory
of this repository.</p>
<p>F5 recommends that you add the <cite>bash</cite> completions as well as the path to this
command to you local <cite>$PATH</cite> variable. YOu can do this by adding the following
to your <cite>~/.bashrc</cite> file,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">eval</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nv">_F5ANSIBLE_COMPLETE</span><span class="o">=</span><span class="nb">source</span> /PATH/TO/f5-ansible/devtools/bin/f5ansible<span class="k">)</span><span class="s2">&quot;</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/PATH/TO/f5-ansible/devtools/bin/
</pre></div>
</div>
<p>Be sure to change the <cite>/PATH/TO</cite> value above to reflect the settings that you have
on <strong>your</strong> system.</p>
<p>With this configuration in place, you can restart your terminal. Once you have, you
will find that you now have an <cite>f5ansible</cite> command available in your $PATH (which
means that you can use the TAB key to auto-complete it).</p>
<p>Additionally, you can tab complete the <cite>f5ansbile</cite> command, and then continue to
press TAB twice or more to get the list of sub-commands that the <cite>f5ansible</cite> command
provides.</p>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>SEA-ML-00028116:f5-ansible trupp$ f5ansible
container-run    module-stub      module-upstream
SEA-ML-00028116:f5-ansible trupp$ f5ansible
</pre></div>
</div>
</div>
</div>
<div class="section" id="questions">
<h1>Questions<a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h1>
<p>Below are a variety of development environment related questions that I’ve been
asked and answers to each</p>
<ul class="simple">
<li><p>What is the smallest incarnation of an F5 that I can use in my lab to
test playbooks?</p></li>
</ul>
<p>I use vagrant boxes for this if I’m doing local testing. For vagrant boxes you
need to build your own, however we provide packerfiles to do that</p>
<p><a class="reference external" href="https://github.com/f5devcentral/f5-packer-templates">https://github.com/f5devcentral/f5-packer-templates</a></p>
<p>and the associated vagrant files</p>
<p><a class="reference external" href="https://github.com/f5devcentral/f5-vagrant-files">https://github.com/f5devcentral/f5-vagrant-files</a></p>
<p>Otherwise, I use VE’s on OpenStack. The base VE image should be sufficient to
run on OpenStack. I use the OVA’s that we distribute because that’s what works
with our OpenStack distro.</p>
<ul class="simple">
<li><p>Is there a way to get one of those and/or licensing for virtual devices?</p></li>
</ul>
<p>You can get any pre-built images from downloads.f5.com (free registration) but
you will indeed need a license to make much use of it. You can acquire a license
through sales or, in special cases, through a business partnership with F5.</p>
</div>


    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  </body>
</html>