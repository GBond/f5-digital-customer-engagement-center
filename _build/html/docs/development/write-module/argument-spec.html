<!DOCTYPE html>
<div id="clouddocs-header">
  <div class="container-fluid">
    <div class="row corp-header">
      <div class="container corp-header">
        <div class="container corp-menu">
          <ul>
            <li><a href="https://f5.com" class="internalLink">F5.com</a></li>
            <li><a href="https://github.com/F5Networks" class="externalLink">GitHub</a></li>
            <li><a href="https://devcentral.f5.com" class="internalLink">Devcentral</a></li>
            <li><a href="https://support.f5.com" class="internalLink">Support</a></li>
          </ul>
        </div>
      </div>
    </div>

    <script async="async"
      src="https://consent.trustarc.com/notice?domain=f5.com&amp;c=teconsent&amp;text=true&amp;gtm=1" crossorigin=""
      id="truste_0.12182038258598205"></script>

    <div class="row pageHeader">
      <div class="container stat">
        <div class="col-xs-12 stat">
          <a class="internalLink" href="https://f5.com">
            <img class="logo" src="https://cdn.f5.com/websites/support/assets/images/logo.svg" width="50" height="44"
              alt="F5 Networks" title="F5 Networks" border="0">
          </a>
          <ul id="MainMenu" class="main-menu">
            <li data-submenu-id="products">
              <a data-link-type="nav: main" href="#" class="currentURL">Products
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>
              <div class="menu-panel soft-hide" id="products-submenu">
                <div class="container">
                  <ul class="submenu">
                    <li>
                      <span class="a-mm-h">BIG-IP Extensibility</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-extension/latest" data-link-type="Nav: Mega">F5
                            Application Services Extension 3</a></li>
                        <li><a href="https://clouddocs.f5.com/products/agc/latest" data-link-type="Nav: Mega">BIG-IP APM Access Guided
                            Configuration</a></li>
                        <li><a href="https://clouddocs.f5.com/products/iapp/iapp-lx/latest" data-link-type="Nav: Mega">iApps LX/iControl LX</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-declarative-onboarding/latest"
                            data-link-type="Nav: Mega">F5 Declarative Onboarding</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-telemetry-streaming/latest" data-link-type="Nav: Mega">F5
                            Telemetry Streaming</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-cloud-failover/latest" data-link-type="Nav: Mega">F5 Cloud
                            Failover</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-templates/latest/" data-link-type="Nav: Mega">F5
                            Application Services Templates</a></li>
                      </ul>
                    </li>


                    <li class="divider"></li>
                    <li><span class="a-mm-h">Container Ingress Services</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/containers/latest/" data-link-type="Nav: Mega">F5 BIG-IP Controller for
                            Kubernetes/OpenShift</a></li>
                      </ul>
                      <span class="a-mm-h">Network Function Virtualization</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud/nfv/latest" data-link-type="Nav: Mega">F5 VNF Manager</a></li>
                      </ul>
                      <span class="a-mm-h">SDK</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/sdk/f5-cli" target="_blank">F5 CLI</a></li>
                        <li><a href="https://clouddocs.f5.com/sdk/f5-sdk-python" target="_blank">F5 SDK Python</a></li>
                      </ul>
                    </li>



                    <li class="divider"></li>
                    <li>
                      <span class="a-mm-h">OpenStack</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/openstack/agent/latest" data-link-type="Nav: Mega">F5 Agent - OpenStack
                            Neutron</a></li>
                        <li><a href="https://clouddocs.f5.com/products/openstack/lbaasv2-driver/latest" data-link-type="Nav: Mega">F5 Driver -
                            OpenStack LBaaS</a></li>
                        <li><a href="https://clouddocs.f5.com/products/openstack/heat-plugins/latest" data-link-type="Nav: Mega">F5 Plugins -
                            OpenStack Heat</a></li>
                      </ul>

                      <span class="a-mm-h">Ecosystems Integrations</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/f5-aci-servicecenter/latest" data-link-type="Nav: Mega">F5 ACI ServiceCenter</a>
                        </li>
                      </ul>


                    </li>
                    <li class="divider"></li>
                    <li><span class="a-mm-h">Orchestration</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/orchestration/ansible/devel" target="_blank">F5 Modules for Ansible</a>
                        </li>
                        <li><a href="https://github.com/F5Networks/f5-aws-cloudformation" target="_blank"
                            class="externalLink">F5 Templates for AWS CloudFormation</a> (GitHub)</li>
                        <li><a href="https://github.com/F5Networks/f5-azure-arm-templates" target="_blank"
                            class="externalLink">F5 Templates for Azure ARM</a> (GitHub)</li>
                        <li><a href="https://github.com/F5Networks/f5-google-gdm-templates" target="_blank"
                            class="externalLink">F5 Templates for Google Cloud Deployment Manager</a> (GitHub)</li>
                        <li><a href="https://clouddocs.f5.com/products/templates/openstack-heat/latest" data-link-type="Nav: Mega">F5 Templates
                            for OpenStack Heat</a></li>
                        <li><a href="https://clouddocs.f5.com/products/orchestration/terraform/latest/" data-link-type="Nav: Mega">F5 Resources
                            for Terraform Provider</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>

            <!--- NEW -->
            <li>
              <a href="#" class="currentURL">APIs
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>

              <div class="menu-panel soft-hide" id="APISubmenu">
                <div class="container">
                  <ul class="submenu">
                    <li>
                      <span class="a-mm-h"></span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/big-iq/mgmt-api/latest/" data-link-type="Nav: Mega">F5 BIG-IQ API</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/api/iapps/">F5 BIG-IP iApps</a></li>
                        <li><a href="https://clouddocs.f5.com/api/irules">F5 BIG-IP iRules API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/irules-lx">F5 BIG-IP iRulesLX API</a></li>
                      </ul>
                    </li>

                    <li class="divider"></li>

                    <li>
                      <span class="a-mm-h"></span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/api/icontrol-rest">F5 BIG-IP iControlREST API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/icontrol-soap/">F5 BIG-IP iControl API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/ihealth/">F5 iHealth API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/tmsh">F5 tmsh scripting API</a></li>
                      </ul>
                    </li>

                  </ul>
                </div>
              </div>
            </li>




            <li>
              <a href="#" class="currentURL">Cloud &amp; Container
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>

              <div class="menu-panel soft-hide" id="ContainersSubmenu">
                <div class="container">
                  <ul class="submenu col-sm-11">
                    <li class="third"><span class="a-mm-h">Cloud Services</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-GS-About.html"
                            data-link-type="Nav: Mega">Get Started</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-Beacon-About.html"
                            data-link-type="Nav: Mega">Beacon</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-DNS-About.html"
                            data-link-type="Nav: Mega">DNS Cloud Service</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-GSLB-About.html"
                            data-link-type="Nav: Mega">DNS Load Balancer Cloud Service</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-Essential.App.Protect-About.html"
                            data-link-type="Nav: Mega">Essential App Protect Service</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>
                    <li class="third"><span class="a-mm-h">Clouds</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/aws_index.html" data-link-type="Nav: Mega">AWS</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/azure_index.html" data-link-type="Nav: Mega">Azure</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/google_index.html" data-link-type="Nav: Mega">Google Cloud</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/cloud/openstack/" data-link-type="Nav: Mega">OpenStack</a></li>
                      </ul>
                      <!-- unnecessary right now>
                    <span class="seemore"><a data-link-type="Nav: Mega" href="/cloud/">See all </a></span>
                    <-->
                    </li>
                    <li class="divider"></li>
                    <li class="third"><span class="a-mm-h">Containers</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/containers/latest/userguide/kubernetes/" data-link-type="Nav: Mega">Kubernetes</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/containers/latest/userguide/openshift/" data-link-type="Nav: Mega">OpenShift</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
            <li>
              <a href="#" class="currentURL">Resources
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>
              <div class="menu-panel soft-hide" id="UPCProgramSubmenu">
                <div class="container">
                  <ul class="submenu col-sm-11">
                    <li class="third">
                      <span class="a-mm-h">Downloads</span>
                      <ul>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://hub.docker.com/r/f5networks/"
                            class="internalLink externalLink">Docker Hub</a></li>
                        <li><a target="_blank" data-link-type="Nav: Mega"
                            href="https://store.docker.com/images/f5networks-asp"
                            class="internalLink externalLink">Docker Store</a></li>
                      </ul>
                      <span class="a-mm-h">OpenSource</span>
                      <ul>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5Networks"
                            class="internalLink externalLink">F5Networks on GitHub</a></li>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5DevCentral"
                            class="internalLink externalLink">F5DevCentral on GitHub</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>
                    <li class="third">
                      <span class="a-mm-h">Training &amp; Labs</span>
                      <ul>
                        <li>
                          <p>Learn how to get the most out of the F5 platform</p>
                        </li>
                        <li><a href="https://clouddocs.f5.com/training/community">Community</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>

                    <li class="third">
                      <a href="//university.f5.com" class="a-mm-h internalLink" target="_blank"
                        data-link-type="Nav: Mega">F5 University</a>
                      <ul>
                        <li>
                          <p>Get up to speed with free self-paced courses</p>
                        </li>
                      </ul>
                      <a data-ng-href="https://devcentral.f5.com" class="a-mm-h internalLink" target="_blank"
                        data-link-type="Nav: Mega" href="https://devcentral.f5.com">DevCentral</a>
                      <ul>
                        <li>
                          <p>Join the community of 250,000+ technical peers</p>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
          </ul>
        </div>

        <div class="col-xs-12 stat">
          <div class="topLinks">
            <span class="glyphicon glyphicon-search upc-search" id="search-toggle" style="display: none;"></span>
          </div>
        </div>
      </div>
    </div>
  </div> <!-- /container-fluid -->
</div>
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The ArgumentSpec &#8212; F5 Digital Customer Engagement Center 0.1 documentation</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />

  
    

  
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="dismiss">
      <button type="button" class="btn btn-info navbar-btn site-hidden">
        <i class="fa fa-align-justify"></i>
      </button>
    </div>
    <div id="sidebar" class="section-nav">
      
      <nav class="nav-sidebartoc">

        
        <h5>F5 Digital Customer Engagement Center 0.1 </h5>
        
<div id="searchbox" role="search">
  <form class="search" action="../../../search.html" method="get">
    <input type="text" class="search" name="q" placeholder=" Search..." />
    <button type="submit" class="btn btn-info navbar-btn"><i class="fa fa-search"></i></button>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        <hr>
        <h5>Current Page</h5>
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">The ArgumentSpec</a><ul>
<li><a class="reference internal" href="#the-argumentspec-class">The ArgumentSpec class</a></li>
<li><a class="reference internal" href="#the-check-mode-declaration">The check_mode declaration</a></li>
<li><a class="reference internal" href="#the-argument-spec">The argument_spec</a></li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

         </span>
        <hr>
        <h5>Site Contents</h5>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usage/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/filing-issues.html">Filing issues</a></li>
</ul>
<p class="caption"><span class="caption-text">Solutions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../solutions/delivery/delivery_index.html">Application Delivery controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../solutions/security/security_index.html">Security</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer's Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-involved.html">How to get involved</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guidelines.html">Guidelines</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>

  
  <div class="main active" id="content">
    <article class="docs-container site-article-inner">
            <nav class="site-breadcrumb-nav site-nav">
          <ul class="site-breadcrumb-list">
            <li class="breadcrumb-item"><button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn site-hidden"><i class="fa fa-align-justify"></i></button>&#x20 <a href="/">CloudDocs Home</a> &gt; <a href="../../../index.html">F5 Digital Customer Engagement Center </a> &gt; The ArgumentSpec</li>
          </ul>
      </nav>
      

    
  <div class="section" id="the-argumentspec">
<h1>The ArgumentSpec<a class="headerlink" href="#the-argumentspec" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code> defines which arguments your module will accept.</p>
<p>Earlier, when you were writing the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> variable, you identified the arguments to the module and the values those arguments took.</p>
<p>Now is the time you would concern yourself with implementing the code that reflects this documentation.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code> is your opportunity to turn documentation into code that you will provide to Ansible.</p>
<p>Ansible has the ability to parse these arguments and provide a small set of enforcement
checks to them. It determines what needs to be checked by virtue of the <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code> class
you provide to it.</p>
<p>First, here is a look at the <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code> class for this module.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArgumentSpec</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">supports_check_mode</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">argument_spec</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="nb">dict</span><span class="p">(),</span>
            <span class="n">actions</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                <span class="n">elements</span><span class="o">=</span><span class="s1">&#39;dict&#39;</span><span class="p">,</span>
                <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                        <span class="n">choices</span><span class="o">=</span><span class="p">[</span>
                            <span class="s1">&#39;forward&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;enable&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;ignore&#39;</span>
                        <span class="p">],</span>
                        <span class="n">required</span><span class="o">=</span><span class="kc">True</span>
                    <span class="p">),</span>
                    <span class="n">pool</span><span class="o">=</span><span class="nb">dict</span><span class="p">(),</span>
                    <span class="n">asm_policy</span><span class="o">=</span><span class="nb">dict</span><span class="p">()</span>
                <span class="p">),</span>
                <span class="n">mutually_exclusive</span><span class="o">=</span><span class="p">[</span>
                    <span class="p">[</span><span class="s1">&#39;pool&#39;</span><span class="p">,</span> <span class="s1">&#39;asm_policy&#39;</span><span class="p">]</span>
                <span class="p">]</span>
            <span class="p">),</span>
            <span class="n">conditions</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                        <span class="n">choices</span><span class="o">=</span><span class="p">[</span>
                            <span class="s1">&#39;http_uri&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;all_traffic&#39;</span>
                        <span class="p">],</span>
                        <span class="n">required</span><span class="o">=</span><span class="kc">True</span>
                    <span class="p">)</span>
                <span class="p">),</span>
                <span class="n">path_begins_with_any</span><span class="o">=</span><span class="nb">dict</span><span class="p">()</span>
            <span class="p">),</span>
            <span class="n">name</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="n">policy</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="n">state</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">default</span><span class="o">=</span><span class="s1">&#39;present&#39;</span><span class="p">,</span>
                <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;absent&#39;</span><span class="p">,</span> <span class="s1">&#39;present&#39;</span><span class="p">]</span>
            <span class="p">),</span>
            <span class="n">partition</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">default</span><span class="o">=</span><span class="s1">&#39;Common&#39;</span><span class="p">,</span>
                <span class="n">fallback</span><span class="o">=</span><span class="p">(</span><span class="n">env_fallback</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;F5_PARTITION&#39;</span><span class="p">])</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argument_spec</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argument_spec</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">f5_argument_spec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">argument_spec</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">argument_spec</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="the-argumentspec-class">
<h2>The ArgumentSpec class<a class="headerlink" href="#the-argumentspec-class" title="Permalink to this headline">¶</a></h2>
<p>The class is located near the bottom of the module. It is by convention that the F5 module
developers put it there. This location is not a technical requirement, but you are required
to follow it per the coding conventions that F5 has established.</p>
<p>Looking at the body of this class, you’ll note that it only consists of an <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>
method. This class has no purpose outside of encapsulating the requirements that it will
deliver to Ansible. Therefore, it typically has no real functionality.</p>
<p>The order in which the code is written, however, is of deep importance. Let’s take a look
at that.</p>
</div>
<div class="section" id="the-check-mode-declaration">
<h2>The check_mode declaration<a class="headerlink" href="#the-check-mode-declaration" title="Permalink to this headline">¶</a></h2>
<p>Typically, the first thing you find in an <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code> class is the creation of an
instance variable named <code class="docutils literal notranslate"><span class="pre">supports_check_mode</span></code>. This is <em>almost always</em> <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Check mode lets the Ansible user ask a module to run without doing anything to a device. It’s a way for the user to know (before they run Ansible in non-check mode) that the module is going to change something on their system.</p>
<p>A deficiency of this feature though, is that it is not implemented in Ansible core. It is
instead left to the will of the module developer whether or not to support this functionality.</p>
<p>The end result is that most modules do not use it, and therefore, it is not a feature you can rely on.</p>
<p>This doesn’t mean that F5 needs to perpetuate the problem though. The F5 module
developers, by default, expect that a module should support check mode. There are very few
cases where it is impossible, or impractical, to support it.</p>
<p>This instance variable is how the module declares that it will support it. Later on in the
module, the F5 developers will add the implementation of the support.</p>
</div>
<div class="section" id="the-argument-spec">
<h2>The argument_spec<a class="headerlink" href="#the-argument-spec" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">argument_spec</span></code> is the body of what defines the arguments your module can accept. You’ll
notice that is is nearly a complete reflection of what was specified in the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code>
variable earlier.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This variable is <em>not</em> an instance variable; it has no <code class="docutils literal notranslate"><span class="pre">self.</span></code> attached to
it. This is important for unit testing. When unit tests are written and run, they
usually begin with an <code class="docutils literal notranslate"><span class="pre">import</span></code> of the <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code> class from the appropriate
module being tested.</p>
<p>If the module were only ever declaring and updating an instance variable, then the unit
tests would begin failing.</p>
<p>For example, when running many module unit tests, the developer might see the first module’s
tests pass, but then the second module’s tests fail with errors that mention that
a mutual exclusivity is being violated. This may sound weird, but is actually very common.</p>
<p>The cause is the global instance of the <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code> class being re-used. And this
problem manifests itself in particular when you are maintaining an instance variable.</p>
<p>One test may use one of the mutually-exclusive properties; it sets it in the
<code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code>. The next test tries to use the other, but since the <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code>
is re-used, the first property was never cleared. Now you have both properties (which
are mutually exclusive) being set to a value. This is an error, and your tests will
fail.</p>
<p>Putting the arguments in a local variable prevents this, because that variable is
destroyed between runs of the tests and usage of the <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code>.</p>
</div>
<p>After the argument spec is locally defined, another variable is created and set to an
empty dictionary value.</p>
<p>This variable is named identically to the first, except this time it is an instance
variable. The module always sets this to an empty <code class="docutils literal notranslate"><span class="pre">dict</span></code> to ensure that no collisions
happen between unit tests.</p>
<p>Next, this instance variable is updated with all of the parameters in the base argument
spec that was imported at the top of the module. This gives the <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code> all of
the common parameters such as <code class="docutils literal notranslate"><span class="pre">user</span></code>, <code class="docutils literal notranslate"><span class="pre">password</span></code>, and <code class="docutils literal notranslate"><span class="pre">server</span></code>.</p>
<p>Finally, the instance variable is updated with <strong>this</strong> module’s arguments. The order to
this updating is important, because it gives the module authors the ability to override
any of the parameters that are defined in the base parameter configuration.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>This is one of the easier classes to write because you have largely done all the work when
you wrote the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> variable earlier.</p>
<p>With this class out of the way, the next class to explore is the <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code>
class. This class is the traffic cop of the module. The stubbing tool provides a boilerplate
version of this class to you. You, as the developer, are expected to replace certain key
instances of API calls in it.</p>
</div>
</div>


    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../../_static/js/bootstrap.min.js"></script>
  <script src="../../../_static/js/clouddocs.js"></script>
  </body>
</html>