<!DOCTYPE html>
<div id="clouddocs-header">
  <div class="container-fluid">
    <div class="row corp-header">
      <div class="container corp-header">
        <div class="container corp-menu">
          <ul>
            <li><a href="https://f5.com" class="internalLink">F5.com</a></li>
            <li><a href="https://github.com/F5Networks" class="externalLink">GitHub</a></li>
            <li><a href="https://devcentral.f5.com" class="internalLink">Devcentral</a></li>
            <li><a href="https://support.f5.com" class="internalLink">Support</a></li>
          </ul>
        </div>
      </div>
    </div>

    <script async="async"
      src="https://consent.trustarc.com/notice?domain=f5.com&amp;c=teconsent&amp;text=true&amp;gtm=1" crossorigin=""
      id="truste_0.12182038258598205"></script>

    <div class="row pageHeader">
      <div class="container stat">
        <div class="col-xs-12 stat">
          <a class="internalLink" href="https://f5.com">
            <img class="logo" src="https://cdn.f5.com/websites/support/assets/images/logo.svg" width="50" height="44"
              alt="F5 Networks" title="F5 Networks" border="0">
          </a>
          <ul id="MainMenu" class="main-menu">
            <li data-submenu-id="products">
              <a data-link-type="nav: main" href="#" class="currentURL">Products
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>
              <div class="menu-panel soft-hide" id="products-submenu">
                <div class="container">
                  <ul class="submenu">
                    <li>
                      <span class="a-mm-h">BIG-IP Extensibility</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-extension/latest" data-link-type="Nav: Mega">F5
                            Application Services Extension 3</a></li>
                        <li><a href="https://clouddocs.f5.com/products/agc/latest" data-link-type="Nav: Mega">BIG-IP APM Access Guided
                            Configuration</a></li>
                        <li><a href="https://clouddocs.f5.com/products/iapp/iapp-lx/latest" data-link-type="Nav: Mega">iApps LX/iControl LX</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-declarative-onboarding/latest"
                            data-link-type="Nav: Mega">F5 Declarative Onboarding</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-telemetry-streaming/latest" data-link-type="Nav: Mega">F5
                            Telemetry Streaming</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-cloud-failover/latest" data-link-type="Nav: Mega">F5 Cloud
                            Failover</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-templates/latest/" data-link-type="Nav: Mega">F5
                            Application Services Templates</a></li>
                      </ul>
                    </li>


                    <li class="divider"></li>
                    <li><span class="a-mm-h">Container Ingress Services</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/containers/latest/" data-link-type="Nav: Mega">F5 BIG-IP Controller for
                            Kubernetes/OpenShift</a></li>
                      </ul>
                      <span class="a-mm-h">Network Function Virtualization</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud/nfv/latest" data-link-type="Nav: Mega">F5 VNF Manager</a></li>
                      </ul>
                      <span class="a-mm-h">SDK</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/sdk/f5-cli" target="_blank">F5 CLI</a></li>
                        <li><a href="https://clouddocs.f5.com/sdk/f5-sdk-python" target="_blank">F5 SDK Python</a></li>
                      </ul>
                    </li>



                    <li class="divider"></li>
                    <li>
                      <span class="a-mm-h">OpenStack</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/openstack/agent/latest" data-link-type="Nav: Mega">F5 Agent - OpenStack
                            Neutron</a></li>
                        <li><a href="https://clouddocs.f5.com/products/openstack/lbaasv2-driver/latest" data-link-type="Nav: Mega">F5 Driver -
                            OpenStack LBaaS</a></li>
                        <li><a href="https://clouddocs.f5.com/products/openstack/heat-plugins/latest" data-link-type="Nav: Mega">F5 Plugins -
                            OpenStack Heat</a></li>
                      </ul>

                      <span class="a-mm-h">Ecosystems Integrations</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/f5-aci-servicecenter/latest" data-link-type="Nav: Mega">F5 ACI ServiceCenter</a>
                        </li>
                      </ul>


                    </li>
                    <li class="divider"></li>
                    <li><span class="a-mm-h">Orchestration</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/orchestration/ansible/devel" target="_blank">F5 Modules for Ansible</a>
                        </li>
                        <li><a href="https://github.com/F5Networks/f5-aws-cloudformation" target="_blank"
                            class="externalLink">F5 Templates for AWS CloudFormation</a> (GitHub)</li>
                        <li><a href="https://github.com/F5Networks/f5-azure-arm-templates" target="_blank"
                            class="externalLink">F5 Templates for Azure ARM</a> (GitHub)</li>
                        <li><a href="https://github.com/F5Networks/f5-google-gdm-templates" target="_blank"
                            class="externalLink">F5 Templates for Google Cloud Deployment Manager</a> (GitHub)</li>
                        <li><a href="https://clouddocs.f5.com/products/templates/openstack-heat/latest" data-link-type="Nav: Mega">F5 Templates
                            for OpenStack Heat</a></li>
                        <li><a href="https://clouddocs.f5.com/products/orchestration/terraform/latest/" data-link-type="Nav: Mega">F5 Resources
                            for Terraform Provider</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>

            <!--- NEW -->
            <li>
              <a href="#" class="currentURL">APIs
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>

              <div class="menu-panel soft-hide" id="APISubmenu">
                <div class="container">
                  <ul class="submenu">
                    <li>
                      <span class="a-mm-h"></span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/big-iq/mgmt-api/latest/" data-link-type="Nav: Mega">F5 BIG-IQ API</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/api/iapps/">F5 BIG-IP iApps</a></li>
                        <li><a href="https://clouddocs.f5.com/api/irules">F5 BIG-IP iRules API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/irules-lx">F5 BIG-IP iRulesLX API</a></li>
                      </ul>
                    </li>

                    <li class="divider"></li>

                    <li>
                      <span class="a-mm-h"></span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/api/icontrol-rest">F5 BIG-IP iControlREST API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/icontrol-soap/">F5 BIG-IP iControl API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/ihealth/">F5 iHealth API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/tmsh">F5 tmsh scripting API</a></li>
                      </ul>
                    </li>

                  </ul>
                </div>
              </div>
            </li>




            <li>
              <a href="#" class="currentURL">Cloud &amp; Container
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>

              <div class="menu-panel soft-hide" id="ContainersSubmenu">
                <div class="container">
                  <ul class="submenu col-sm-11">
                    <li class="third"><span class="a-mm-h">Cloud Services</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-GS-About.html"
                            data-link-type="Nav: Mega">Get Started</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-Beacon-About.html"
                            data-link-type="Nav: Mega">Beacon</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-DNS-About.html"
                            data-link-type="Nav: Mega">DNS Cloud Service</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-GSLB-About.html"
                            data-link-type="Nav: Mega">DNS Load Balancer Cloud Service</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-Essential.App.Protect-About.html"
                            data-link-type="Nav: Mega">Essential App Protect Service</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>
                    <li class="third"><span class="a-mm-h">Clouds</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/aws_index.html" data-link-type="Nav: Mega">AWS</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/azure_index.html" data-link-type="Nav: Mega">Azure</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/google_index.html" data-link-type="Nav: Mega">Google Cloud</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/cloud/openstack/" data-link-type="Nav: Mega">OpenStack</a></li>
                      </ul>
                      <!-- unnecessary right now>
                    <span class="seemore"><a data-link-type="Nav: Mega" href="/cloud/">See all </a></span>
                    <-->
                    </li>
                    <li class="divider"></li>
                    <li class="third"><span class="a-mm-h">Containers</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/containers/latest/userguide/kubernetes/" data-link-type="Nav: Mega">Kubernetes</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/containers/latest/userguide/openshift/" data-link-type="Nav: Mega">OpenShift</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
            <li>
              <a href="#" class="currentURL">Resources
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>
              <div class="menu-panel soft-hide" id="UPCProgramSubmenu">
                <div class="container">
                  <ul class="submenu col-sm-11">
                    <li class="third">
                      <span class="a-mm-h">Downloads</span>
                      <ul>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://hub.docker.com/r/f5networks/"
                            class="internalLink externalLink">Docker Hub</a></li>
                        <li><a target="_blank" data-link-type="Nav: Mega"
                            href="https://store.docker.com/images/f5networks-asp"
                            class="internalLink externalLink">Docker Store</a></li>
                      </ul>
                      <span class="a-mm-h">OpenSource</span>
                      <ul>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5Networks"
                            class="internalLink externalLink">F5Networks on GitHub</a></li>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5DevCentral"
                            class="internalLink externalLink">F5DevCentral on GitHub</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>
                    <li class="third">
                      <span class="a-mm-h">Training &amp; Labs</span>
                      <ul>
                        <li>
                          <p>Learn how to get the most out of the F5 platform</p>
                        </li>
                        <li><a href="https://clouddocs.f5.com/training/community">Community</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>

                    <li class="third">
                      <a href="//university.f5.com" class="a-mm-h internalLink" target="_blank"
                        data-link-type="Nav: Mega">F5 University</a>
                      <ul>
                        <li>
                          <p>Get up to speed with free self-paced courses</p>
                        </li>
                      </ul>
                      <a data-ng-href="https://devcentral.f5.com" class="a-mm-h internalLink" target="_blank"
                        data-link-type="Nav: Mega" href="https://devcentral.f5.com">DevCentral</a>
                      <ul>
                        <li>
                          <p>Join the community of 250,000+ technical peers</p>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
          </ul>
        </div>

        <div class="col-xs-12 stat">
          <div class="topLinks">
            <span class="glyphicon glyphicon-search upc-search" id="search-toggle" style="display: none;"></span>
          </div>
        </div>
      </div>
    </div>
  </div> <!-- /container-fluid -->
</div>
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The ModuleManager &#8212; F5 Digital Customer Engagement Center 0.1 documentation</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />

  
    

  
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="dismiss">
      <button type="button" class="btn btn-info navbar-btn site-hidden">
        <i class="fa fa-align-justify"></i>
      </button>
    </div>
    <div id="sidebar" class="section-nav">
      
      <nav class="nav-sidebartoc">

        
        <h5>F5 Digital Customer Engagement Center 0.1 </h5>
        
<div id="searchbox" role="search">
  <form class="search" action="../../../search.html" method="get">
    <input type="text" class="search" name="q" placeholder=" Search..." />
    <button type="submit" class="btn btn-info navbar-btn"><i class="fa fa-search"></i></button>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        <hr>
        <h5>Current Page</h5>
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">The ModuleManager</a><ul>
<li><a class="reference internal" href="#versions-of-the-coding-standards">Versions of the coding standards</a></li>
<li><a class="reference internal" href="#modulemanager-for-bigip-policy-rule">ModuleManager for bigip_policy_rule</a></li>
<li><a class="reference internal" href="#the-common-methods">The common methods</a><ul>
<li><a class="reference internal" href="#the-init-method">The __init__ method</a></li>
<li><a class="reference internal" href="#the-update-changed-options-method">The _update_changed_options method</a></li>
<li><a class="reference internal" href="#the-should-update-method">The should_update method</a></li>
<li><a class="reference internal" href="#the-exec-module-method">The exec_module method</a></li>
<li><a class="reference internal" href="#the-announce-deprecations-method">The _announce_deprecations method</a></li>
<li><a class="reference internal" href="#the-present-method">The present method</a></li>
<li><a class="reference internal" href="#the-exists-method">The exists method</a></li>
<li><a class="reference internal" href="#the-update-method">The update method</a></li>
<li><a class="reference internal" href="#the-remove-method">The remove method</a></li>
<li><a class="reference internal" href="#the-create-method">The create method</a></li>
<li><a class="reference internal" href="#the-absent-method">The absent method</a></li>
<li><a class="reference internal" href="#the-create-on-device-method">The create_on_device method</a></li>
<li><a class="reference internal" href="#the-update-on-device-method">The update_on_device method</a></li>
<li><a class="reference internal" href="#the-remove-from-device-method">The remove_from_device method</a></li>
<li><a class="reference internal" href="#the-read-current-from-device-method">The read_current_from_device method</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-other-methods">The other methods</a></li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

         </span>
        <hr>
        <h5>Site Contents</h5>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usage/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/getting_started.html">Getting started</a></li>
</ul>
<p class="caption"><span class="caption-text">Solutions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../solutions/delivery/delivery_index.html">Application Delivery controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../solutions/security/security_index.html">Security</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer's Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-involved.html">How to get involved</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guidelines.html">Guidelines</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>

  
  <div class="main active" id="content">
    <article class="docs-container site-article-inner">
            <nav class="site-breadcrumb-nav site-nav">
          <ul class="site-breadcrumb-list">
            <li class="breadcrumb-item"><button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn site-hidden"><i class="fa fa-align-justify"></i></button>&#x20 <a href="/">CloudDocs Home</a> &gt; <a href="../../../index.html">F5 Digital Customer Engagement Center </a> &gt; The ModuleManager</li>
          </ul>
      </nav>
      

    
  <div class="section" id="the-modulemanager">
<h1>The ModuleManager<a class="headerlink" href="#the-modulemanager" title="Permalink to this headline">¶</a></h1>
<p>The next class that we will look at is the <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> class.</p>
<p>The previous section stated that the <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> is considered the
traffic cop of the module. It is also the main ingress point into all future work that
the module can take.</p>
<p>This class can take several forms. The most typical form though is a rather simple form
of the Command pattern. This is the type of <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> that is used in this
module.</p>
<p>Other forms that the manager can take vary with the needs of the module. A common alternative
of the Command pattern in the <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> is the use of the Factory pattern.</p>
<p>The Factory pattern, for example, is used in a number of GTM modules. It is a go-to pattern
for cases where the F5 module developers need to create one module to support a variety of
versions of an F5 product. For example, the major API changes that occurred in GTM between
versions 11.x and 12.x.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> class is usually where the specifics of your code will be. The <code class="docutils literal notranslate"><span class="pre">f5ansible</span></code>
command will create a generic version of this for you. It is your responsibility to change
the API calls as needed.</p>
<div class="section" id="versions-of-the-coding-standards">
<h2>Versions of the coding standards<a class="headerlink" href="#versions-of-the-coding-standards" title="Permalink to this headline">¶</a></h2>
<p>This would be a good point in time to discuss how the <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> implementation (and
a number of other classes) have changed in design over time. This gives some history to the
story, and insight into what has been done in the past.</p>
<p>Below are examples of the different versions of the design standards that have existed at
one point or another:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/F5Networks/f5-ansible/blob/8505ed1a245673aa856eb88baad9896bbe87994b/library/bigip_pool.py">version 3.1.1 (current)</a></p></li>
<li><p><a class="reference external" href="https://github.com/F5Networks/f5-ansible/blob/f6ae5eecbcffdf0008905830dbefb4044f849a14/library/bigip_monitor_tcp_echo.py">version 3.1</a></p></li>
<li><p><a class="reference external" href="https://github.com/F5Networks/f5-ansible/blob/b81304b75d0d3a4d406f20e121ac3c3285168c2d/library/bigip_device_sshd.py">version 3</a></p></li>
<li><p><a class="reference external" href="https://github.com/F5Networks/f5-ansible/blob/b6a502034e21d1d7039ec0cbb642e22259d646fc/library/bigip_routedomain.py">version 2</a></p></li>
<li><p><a class="reference external" href="https://github.com/F5Networks/f5-ansible/blob/b0d2afa1ad0b5bef29526477bb1ca0cdfd74ff74/library/_bigip_node.py">version 1</a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> class will change over time as design standards change. The above
examples are for historical reference and training.</p>
</div>
<p>Most modules these days will “look” like version 3.1.1 (as of the time of this writing). The F5 module developers expect this to change as their needs change.</p>
<p>When a change in the coding standards happens, work must be undertaken to ensure that <strong>all</strong> modules are brought up to spec. This is an arduous task that will get more difficult as time goes on and the total number of F5 modules for Ansible increases.</p>
<p>Nevertheless, it is more difficult to maintain the F5 Modules for Ansible code base if the modules are each in varying states of convention.</p>
</div>
<div class="section" id="modulemanager-for-bigip-policy-rule">
<h2>ModuleManager for bigip_policy_rule<a class="headerlink" href="#modulemanager-for-bigip-policy-rule" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> for this module is shown in its entirety <a class="reference external" href="https://github.com/F5Networks/f5-ansible/blob/stable-2.5/library/bigip_policy_rule.py#L596">at this link</a>. For this tutorial, you should reproduce this class in your own module file.</p>
<p>The remainder of this content covers several things.</p>
<ul class="simple">
<li><p>The changes to make to this module to reflect the required functionality.</p></li>
<li><p>Explanations of the different methods in the class and how they relate to the
<code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code>’s responsibilities.</p></li>
<li><p>Conventions that are allowed when you want to extend the functionality of the manager.</p></li>
<li><p>An example of the Factory <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> and how the flow of a module changes to
accommodate the pattern.</p></li>
</ul>
</div>
<div class="section" id="the-common-methods">
<h2>The common methods<a class="headerlink" href="#the-common-methods" title="Permalink to this headline">¶</a></h2>
<p>The following methods are part of the boilerplate that is generated by the <code class="docutils literal notranslate"><span class="pre">f5ansible</span></code>
command.</p>
<div class="section" id="the-init-method">
<h3>The __init__ method<a class="headerlink" href="#the-init-method" title="Permalink to this headline">¶</a></h3>
<p>This method initializes the <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> class. In this method, a couple of
important things are initialized.</p>
<p>A number of variables are set. These variables are used throughout the module.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 22%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Instance Of</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">self.module</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AnsibleModule</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">self.module</span></code> variable contains the <code class="docutils literal notranslate"><span class="pre">AnsibleModule</span></code>
object. This allows the <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> class to have
access to the parameters that were sent to the module.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">self.client</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">F5Client</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">self.client</span></code> variable contains your copy of the
connection to the F5 product. This variable is used
extensively in the <code class="docutils literal notranslate"><span class="pre">*_on_device</span></code> and <code class="docutils literal notranslate"><span class="pre">*_from_device</span></code>
methods that are discussed later.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">self.want</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ModuleParameters</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">self.want</span></code> variable is a common theme across a
number of areas of the module, the <code class="docutils literal notranslate"><span class="pre">Difference</span></code> and
<code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> classes in particular. This object
exposes all of the parameters sent to the module, as
properties of the <code class="docutils literal notranslate"><span class="pre">self.want</span></code> object. You will refer to
this module for all future operations that require you to
get the data that was sent to you by the user. It is the
configuration that the user “wants.”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">self.have</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ApiParameters</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">self.have</span></code> variable is similar to the <code class="docutils literal notranslate"><span class="pre">self.want</span></code>
variable. It, too, is a collection of parameters that are
available as properties. The difference is that, while the
<code class="docutils literal notranslate"><span class="pre">self.want</span></code> variable is what the user <em>wants</em>, the
<code class="docutils literal notranslate"><span class="pre">self.have</span></code> variable contains the configuration that the
system already <em>has</em>. With these two variables, you are
able to do all of the comparison needed to support updating
resources on the F5 products.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">self.changes</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">UsableChanges</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">self.changes</span></code> variable contains a copy of the
<em>usable</em> changes that will be discovered by the
<code class="docutils literal notranslate"><span class="pre">Difference</span></code> class. When the <code class="docutils literal notranslate"><span class="pre">Difference</span></code> class is
used, it generates a number of properties. These properties
usually match the properties that you’ve been working with
in the <code class="docutils literal notranslate"><span class="pre">self.want</span></code> and <code class="docutils literal notranslate"><span class="pre">self.have</span></code> objects. With
<code class="docutils literal notranslate"><span class="pre">self.changes</span></code>, the module gives you one last opportunity
to make sure that your API values are formatted as you want
them to be. It is this object that is then usually
delivered to the API.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="the-update-changed-options-method">
<h3>The _update_changed_options method<a class="headerlink" href="#the-update-changed-options-method" title="Permalink to this headline">¶</a></h3>
<p>This method invokes the <code class="docutils literal notranslate"><span class="pre">Difference</span></code> class to check for updates.</p>
<p>Use this method when requesting an update to an existing resource. When this method runs,
the <code class="docutils literal notranslate"><span class="pre">self.changes</span></code> object is updated with the changes needed when updating the API.</p>
<p>A key point about this method is the way the results of diff’ing parameters are interpreted. The return value of a <code class="docutils literal notranslate"><span class="pre">compare</span></code> operation of the <code class="docutils literal notranslate"><span class="pre">Difference</span></code> class is
either a scalar value or a dictionary of values.</p>
<p>If a scalar value is returned, it is just associated with the key that matches the parameter
being compared. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">changed</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">change</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">changed</span></code> is a dictionary of results that <em>will become</em> the <code class="docutils literal notranslate"><span class="pre">UsableChanges</span></code>.</p>
<p>If a dictionary value is returned, it is merged into the <code class="docutils literal notranslate"><span class="pre">changed</span></code> dictionary. Each key
and value of the returned dictionary becomes a key and value of the <code class="docutils literal notranslate"><span class="pre">changed</span></code> dictionary.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">changed</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">change</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="the-should-update-method">
<h3>The should_update method<a class="headerlink" href="#the-should-update-method" title="Permalink to this headline">¶</a></h3>
<p>This method is very similar to the <code class="docutils literal notranslate"><span class="pre">_update_changed_options</span></code>, except this method is used when creating a <strong>new</strong> resource only. In this case, there is no <code class="docutils literal notranslate"><span class="pre">Difference</span></code> class that
you need to invoke.</p>
</div>
<div class="section" id="the-exec-module-method">
<h3>The exec_module method<a class="headerlink" href="#the-exec-module-method" title="Permalink to this headline">¶</a></h3>
<p>This method is the only ingress point into the execution of the module. <strong>All</strong> modules run
this command to begin execution.</p>
<p>The exact implementation of this method can vary from module to module, however, what usually
changes is only the <code class="docutils literal notranslate"><span class="pre">if...else</span></code> statement in the body of it. Other implementations may
have more states, or even no states.</p>
<p>Just remember that this is the ingress point to all module execution.</p>
</div>
<div class="section" id="the-announce-deprecations-method">
<h3>The _announce_deprecations method<a class="headerlink" href="#the-announce-deprecations-method" title="Permalink to this headline">¶</a></h3>
<p>The purpose of this method is to notify the user of the module (via the Playbook) that a
feature they are using is deprecated.</p>
</div>
<div class="section" id="the-present-method">
<h3>The present method<a class="headerlink" href="#the-present-method" title="Permalink to this headline">¶</a></h3>
<p>This is a simple method that directs the execution of the module based on whether the
requested resource needs to be created or updated. This method is usually called from
the <code class="docutils literal notranslate"><span class="pre">exec_module</span></code> method.</p>
</div>
<div class="section" id="the-exists-method">
<h3>The exists method<a class="headerlink" href="#the-exists-method" title="Permalink to this headline">¶</a></h3>
<p>This is the first method you will change.</p>
<p>The purpose of this method is to determine if a resource currently exists. You <strong>must</strong> change this method to reflect the APIs of the module that you are writing. During unit
testing, you will be stubbing out this module because you will be driving code paths and
have no need to communicate with a real device.</p>
</div>
<div class="section" id="the-update-method">
<h3>The update method<a class="headerlink" href="#the-update-method" title="Permalink to this headline">¶</a></h3>
<p>This method is responsible for dealing with update-specific logic. It is the last chance
you have before you drop the API data on the wire to send to the
remote F5 device.</p>
<p>The content of this module usually changes for each module (and is expected to change).
Therefore, this is another method that you will change from the default
boilerplate implementation.</p>
<p>This method wraps the <code class="docutils literal notranslate"><span class="pre">update_on_device</span></code> method.</p>
</div>
<div class="section" id="the-remove-method">
<h3>The remove method<a class="headerlink" href="#the-remove-method" title="Permalink to this headline">¶</a></h3>
<p>This method is responsible for dealing with resource removal-specific logic. It is the last
chance that you have before the request to delete the resource is dropped on
the wire.</p>
<p>The content of this module usually changes for each module (and is expected to change).
Therefore, this is another method you will want to change from the default
boilerplate implementation.</p>
<p>This method wraps the <code class="docutils literal notranslate"><span class="pre">remove_from_device</span></code> method.</p>
</div>
<div class="section" id="the-create-method">
<h3>The create method<a class="headerlink" href="#the-create-method" title="Permalink to this headline">¶</a></h3>
<p>This method is responsible for dealing with resource creation specific logic. It is the last
chance that a module developer has before the request to create the resource is dropped on
the wire.</p>
<p>The content of this module usually changes for each module (and is expected to change).
Therefore, this will be another method that you will want to change from the default
boilerplate implementation.</p>
<p>This method wraps the <code class="docutils literal notranslate"><span class="pre">create_on_device</span></code> method.</p>
</div>
<div class="section" id="the-absent-method">
<h3>The absent method<a class="headerlink" href="#the-absent-method" title="Permalink to this headline">¶</a></h3>
<p>This is a simple method that directs the execution of the module based on whether the
requested resource needs to be deleted or not. This method is usually called from
the <code class="docutils literal notranslate"><span class="pre">exec_module</span></code> method.</p>
</div>
<div class="section" id="the-create-on-device-method">
<h3>The create_on_device method<a class="headerlink" href="#the-create-on-device-method" title="Permalink to this headline">¶</a></h3>
<p>This method is one of the major override points in a module. This method must be customized
to reflect the APIs required by your module for resource creation.</p>
</div>
<div class="section" id="the-update-on-device-method">
<h3>The update_on_device method<a class="headerlink" href="#the-update-on-device-method" title="Permalink to this headline">¶</a></h3>
<p>This method is one of the major override points in a module. This method must be customized
to reflect the APIs required by your module for resource updating.</p>
</div>
<div class="section" id="the-remove-from-device-method">
<h3>The remove_from_device method<a class="headerlink" href="#the-remove-from-device-method" title="Permalink to this headline">¶</a></h3>
<p>This method is one of the major override points in a module. This method must be customized
to reflect the APIs required by your module for resource removal.</p>
</div>
<div class="section" id="the-read-current-from-device-method">
<h3>The read_current_from_device method<a class="headerlink" href="#the-read-current-from-device-method" title="Permalink to this headline">¶</a></h3>
<p>This method is one of the major override points in a module. This method must be customized
to reflect the APIs required by your module for fetching resource details from the remote
device.</p>
<p>This method returns a copy of the <code class="docutils literal notranslate"><span class="pre">ApiParameters</span></code>, or similar, class.</p>
</div>
</div>
<div class="section" id="the-other-methods">
<h2>The other methods<a class="headerlink" href="#the-other-methods" title="Permalink to this headline">¶</a></h2>
<p>The remaining methods in the <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> class are specific to this module. They are
supporting methods, whose purpose is to make the developer’s task easier in implementing a
particular piece of functionality.</p>
<p>Usually, these custom methods are prefixed with an underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>) character, such as in the
following methods.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_create_existing_policy_draft_on_device</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While this method seems to be named after the special <code class="docutils literal notranslate"><span class="pre">*_on_device</span></code> methods mentioned earlier, it is in fact a module-specific method. The other <code class="docutils literal notranslate"><span class="pre">*_on_device</span></code>
methods mentioned earlier are part of the common <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> class and are stubbed out for you. The above method is not stubbed out for you and you would
need to add it.</p>
</div>
<p>Other times, these methods have no underscore, such as in the following methods.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">draft_exists</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">publish_on_device</span></code></p></li>
</ul>
<p>Again, just like the underscored methods, the non-underscored methods (while they have
a similar <code class="docutils literal notranslate"><span class="pre">*_on_device</span></code> naming scheme) are not considered core methods. The important
point is to use the <code class="docutils literal notranslate"><span class="pre">*_on_device</span></code> pattern when you need to communicate with the
remote F5 device.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>By now, the <code class="docutils literal notranslate"><span class="pre">ModuleManager</span></code> class you have been working with should be fleshed out. This
class is the core point of control in the module. It contains the only ingress point in
the execution of the module. It also contains all the other integration points with all the
other classes in the module.</p>
<p>The next section explores the classes related to parameters.</p>
</div>
</div>


    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../../_static/js/bootstrap.min.js"></script>
  <script src="../../../_static/js/clouddocs.js"></script>
  </body>
</html>