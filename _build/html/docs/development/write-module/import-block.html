<!DOCTYPE html>
<div id="clouddocs-header">
  <div class="container-fluid">
    <div class="row corp-header">
      <div class="container corp-header">
        <div class="container corp-menu">
          <ul>
            <li><a href="https://f5.com" class="internalLink">F5.com</a></li>
            <li><a href="https://github.com/F5Networks" class="externalLink">GitHub</a></li>
            <li><a href="https://devcentral.f5.com" class="internalLink">Devcentral</a></li>
            <li><a href="https://support.f5.com" class="internalLink">Support</a></li>
          </ul>
        </div>
      </div>
    </div>

    <script async="async"
      src="https://consent.trustarc.com/notice?domain=f5.com&amp;c=teconsent&amp;text=true&amp;gtm=1" crossorigin=""
      id="truste_0.12182038258598205"></script>

    <div class="row pageHeader">
      <div class="container stat">
        <div class="col-xs-12 stat">
          <a class="internalLink" href="https://f5.com">
            <img class="logo" src="https://cdn.f5.com/websites/support/assets/images/logo.svg" width="50" height="44"
              alt="F5 Networks" title="F5 Networks" border="0">
          </a>
          <ul id="MainMenu" class="main-menu">
            <li data-submenu-id="products">
              <a data-link-type="nav: main" href="#" class="currentURL">Products
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>
              <div class="menu-panel soft-hide" id="products-submenu">
                <div class="container">
                  <ul class="submenu">
                    <li>
                      <span class="a-mm-h">BIG-IP Extensibility</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-extension/latest" data-link-type="Nav: Mega">F5
                            Application Services Extension 3</a></li>
                        <li><a href="https://clouddocs.f5.com/products/agc/latest" data-link-type="Nav: Mega">BIG-IP APM Access Guided
                            Configuration</a></li>
                        <li><a href="https://clouddocs.f5.com/products/iapp/iapp-lx/latest" data-link-type="Nav: Mega">iApps LX/iControl LX</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-declarative-onboarding/latest"
                            data-link-type="Nav: Mega">F5 Declarative Onboarding</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-telemetry-streaming/latest" data-link-type="Nav: Mega">F5
                            Telemetry Streaming</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-cloud-failover/latest" data-link-type="Nav: Mega">F5 Cloud
                            Failover</a></li>
                        <li><a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-templates/latest/" data-link-type="Nav: Mega">F5
                            Application Services Templates</a></li>
                      </ul>
                    </li>


                    <li class="divider"></li>
                    <li><span class="a-mm-h">Container Ingress Services</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/containers/latest/" data-link-type="Nav: Mega">F5 BIG-IP Controller for
                            Kubernetes/OpenShift</a></li>
                      </ul>
                      <span class="a-mm-h">Network Function Virtualization</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud/nfv/latest" data-link-type="Nav: Mega">F5 VNF Manager</a></li>
                      </ul>
                      <span class="a-mm-h">SDK</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/sdk/f5-cli" target="_blank">F5 CLI</a></li>
                        <li><a href="https://clouddocs.f5.com/sdk/f5-sdk-python" target="_blank">F5 SDK Python</a></li>
                      </ul>
                    </li>



                    <li class="divider"></li>
                    <li>
                      <span class="a-mm-h">OpenStack</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/openstack/agent/latest" data-link-type="Nav: Mega">F5 Agent - OpenStack
                            Neutron</a></li>
                        <li><a href="https://clouddocs.f5.com/products/openstack/lbaasv2-driver/latest" data-link-type="Nav: Mega">F5 Driver -
                            OpenStack LBaaS</a></li>
                        <li><a href="https://clouddocs.f5.com/products/openstack/heat-plugins/latest" data-link-type="Nav: Mega">F5 Plugins -
                            OpenStack Heat</a></li>
                      </ul>

                      <span class="a-mm-h">Ecosystems Integrations</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/f5-aci-servicecenter/latest" data-link-type="Nav: Mega">F5 ACI ServiceCenter</a>
                        </li>
                      </ul>


                    </li>
                    <li class="divider"></li>
                    <li><span class="a-mm-h">Orchestration</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/orchestration/ansible/devel" target="_blank">F5 Modules for Ansible</a>
                        </li>
                        <li><a href="https://github.com/F5Networks/f5-aws-cloudformation" target="_blank"
                            class="externalLink">F5 Templates for AWS CloudFormation</a> (GitHub)</li>
                        <li><a href="https://github.com/F5Networks/f5-azure-arm-templates" target="_blank"
                            class="externalLink">F5 Templates for Azure ARM</a> (GitHub)</li>
                        <li><a href="https://github.com/F5Networks/f5-google-gdm-templates" target="_blank"
                            class="externalLink">F5 Templates for Google Cloud Deployment Manager</a> (GitHub)</li>
                        <li><a href="https://clouddocs.f5.com/products/templates/openstack-heat/latest" data-link-type="Nav: Mega">F5 Templates
                            for OpenStack Heat</a></li>
                        <li><a href="https://clouddocs.f5.com/products/orchestration/terraform/latest/" data-link-type="Nav: Mega">F5 Resources
                            for Terraform Provider</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>

            <!--- NEW -->
            <li>
              <a href="#" class="currentURL">APIs
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>

              <div class="menu-panel soft-hide" id="APISubmenu">
                <div class="container">
                  <ul class="submenu">
                    <li>
                      <span class="a-mm-h"></span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/products/big-iq/mgmt-api/latest/" data-link-type="Nav: Mega">F5 BIG-IQ API</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/api/iapps/">F5 BIG-IP iApps</a></li>
                        <li><a href="https://clouddocs.f5.com/api/irules">F5 BIG-IP iRules API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/irules-lx">F5 BIG-IP iRulesLX API</a></li>
                      </ul>
                    </li>

                    <li class="divider"></li>

                    <li>
                      <span class="a-mm-h"></span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/api/icontrol-rest">F5 BIG-IP iControlREST API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/icontrol-soap/">F5 BIG-IP iControl API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/ihealth/">F5 iHealth API</a></li>
                        <li><a href="https://clouddocs.f5.com/api/tmsh">F5 tmsh scripting API</a></li>
                      </ul>
                    </li>

                  </ul>
                </div>
              </div>
            </li>




            <li>
              <a href="#" class="currentURL">Cloud &amp; Container
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>

              <div class="menu-panel soft-hide" id="ContainersSubmenu">
                <div class="container">
                  <ul class="submenu col-sm-11">
                    <li class="third"><span class="a-mm-h">Cloud Services</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-GS-About.html"
                            data-link-type="Nav: Mega">Get Started</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-Beacon-About.html"
                            data-link-type="Nav: Mega">Beacon</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-DNS-About.html"
                            data-link-type="Nav: Mega">DNS Cloud Service</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-GSLB-About.html"
                            data-link-type="Nav: Mega">DNS Load Balancer Cloud Service</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud-services/latest/f5-cloud-services-Essential.App.Protect-About.html"
                            data-link-type="Nav: Mega">Essential App Protect Service</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>
                    <li class="third"><span class="a-mm-h">Clouds</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/aws_index.html" data-link-type="Nav: Mega">AWS</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/azure_index.html" data-link-type="Nav: Mega">Azure</a></li>
                        <li><a href="https://clouddocs.f5.com/cloud/public/v1/google_index.html" data-link-type="Nav: Mega">Google Cloud</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/cloud/openstack/" data-link-type="Nav: Mega">OpenStack</a></li>
                      </ul>
                      <!-- unnecessary right now>
                    <span class="seemore"><a data-link-type="Nav: Mega" href="/cloud/">See all </a></span>
                    <-->
                    </li>
                    <li class="divider"></li>
                    <li class="third"><span class="a-mm-h">Containers</span>
                      <ul>
                        <li><a href="https://clouddocs.f5.com/containers/latest/userguide/kubernetes/" data-link-type="Nav: Mega">Kubernetes</a>
                        </li>
                        <li><a href="https://clouddocs.f5.com/containers/latest/userguide/openshift/" data-link-type="Nav: Mega">OpenShift</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
            <li>
              <a href="#" class="currentURL">Resources
                <span class="indicator"><span class="arrow-up"></span></span>
              </a>
              <div class="menu-panel soft-hide" id="UPCProgramSubmenu">
                <div class="container">
                  <ul class="submenu col-sm-11">
                    <li class="third">
                      <span class="a-mm-h">Downloads</span>
                      <ul>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://hub.docker.com/r/f5networks/"
                            class="internalLink externalLink">Docker Hub</a></li>
                        <li><a target="_blank" data-link-type="Nav: Mega"
                            href="https://store.docker.com/images/f5networks-asp"
                            class="internalLink externalLink">Docker Store</a></li>
                      </ul>
                      <span class="a-mm-h">OpenSource</span>
                      <ul>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5Networks"
                            class="internalLink externalLink">F5Networks on GitHub</a></li>
                        <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5DevCentral"
                            class="internalLink externalLink">F5DevCentral on GitHub</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>
                    <li class="third">
                      <span class="a-mm-h">Training &amp; Labs</span>
                      <ul>
                        <li>
                          <p>Learn how to get the most out of the F5 platform</p>
                        </li>
                        <li><a href="https://clouddocs.f5.com/training/community">Community</a></li>
                      </ul>
                    </li>
                    <li class="divider"></li>

                    <li class="third">
                      <a href="//university.f5.com" class="a-mm-h internalLink" target="_blank"
                        data-link-type="Nav: Mega">F5 University</a>
                      <ul>
                        <li>
                          <p>Get up to speed with free self-paced courses</p>
                        </li>
                      </ul>
                      <a data-ng-href="https://devcentral.f5.com" class="a-mm-h internalLink" target="_blank"
                        data-link-type="Nav: Mega" href="https://devcentral.f5.com">DevCentral</a>
                      <ul>
                        <li>
                          <p>Join the community of 250,000+ technical peers</p>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
          </ul>
        </div>

        <div class="col-xs-12 stat">
          <div class="topLinks">
            <span class="glyphicon glyphicon-search upc-search" id="search-toggle" style="display: none;"></span>
          </div>
        </div>
      </div>
    </div>
  </div> <!-- /container-fluid -->
</div>
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The import block &#8212; F5 Digital Customer Engagement Center 0.1 documentation</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />

  
    

  
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="dismiss">
      <button type="button" class="btn btn-info navbar-btn site-hidden">
        <i class="fa fa-align-justify"></i>
      </button>
    </div>
    <div id="sidebar" class="section-nav">
      
      <nav class="nav-sidebartoc">

        
        <h5>F5 Digital Customer Engagement Center 0.1 </h5>
        
<div id="searchbox" role="search">
  <form class="search" action="../../../search.html" method="get">
    <input type="text" class="search" name="q" placeholder=" Search..." />
    <button type="submit" class="btn btn-info navbar-btn"><i class="fa fa-search"></i></button>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        <hr>
        <h5>Current Page</h5>
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">The import block</a><ul>
<li><a class="reference internal" href="#ansiblemodule-import">AnsibleModule import</a></li>
<li><a class="reference internal" href="#env-fallback-import">env_fallback import</a></li>
<li><a class="reference internal" href="#various-helper-import">Various helper import</a></li>
<li><a class="reference internal" href="#has-devel-imports-definition">HAS_DEVEL_IMPORTS definition</a></li>
<li><a class="reference internal" href="#the-dev-prod-import-try-block">The dev/prod import try block</a></li>
<li><a class="reference internal" href="#what-is-imported-in-the-try-block">What is imported in the try block?</a></li>
<li><a class="reference internal" href="#key-imports-to-recognize">Key imports to recognize</a></li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

         </span>
        <hr>
        <h5>Site Contents</h5>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usage/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/filing-issues.html">Filing issues</a></li>
</ul>
<p class="caption"><span class="caption-text">Solutions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../solutions/delivery/delivery_index.html">Application Delivery controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../solutions/security/security_index.html">Security</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer's Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-involved.html">How to get involved</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guidelines.html">Guidelines</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>

  
  <div class="main active" id="content">
    <article class="docs-container site-article-inner">
            <nav class="site-breadcrumb-nav site-nav">
          <ul class="site-breadcrumb-list">
            <li class="breadcrumb-item"><button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn site-hidden"><i class="fa fa-align-justify"></i></button>&#x20 <a href="/">CloudDocs Home</a> &gt; <a href="../../../index.html">F5 Digital Customer Engagement Center </a> &gt; The import block</li>
          </ul>
      </nav>
      

    
  <div class="section" id="the-import-block">
<span id="import-block-label"></span><h1>The import block<a class="headerlink" href="#the-import-block" title="Permalink to this headline">¶</a></h1>
<p>The next section of the module is the block of code where the imports happen.</p>
<p>This code usually just involves importing the <code class="docutils literal notranslate"><span class="pre">module_utils</span></code> helper libraries, but may
also include imports of other libraries if you are working with legacy code.</p>
<p>For this module, the import block is:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansible.module_utils.basic</span> <span class="kn">import</span> <span class="n">AnsibleModule</span>
<span class="kn">from</span> <span class="nn">ansible.module_utils.basic</span> <span class="kn">import</span> <span class="n">env_fallback</span>
<span class="kn">from</span> <span class="nn">ansible.module_utils.six</span> <span class="kn">import</span> <span class="n">iteritems</span>

<span class="n">HAS_DEVEL_IMPORTS</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Sideband repository used for dev</span>
    <span class="kn">from</span> <span class="nn">library.module_utils.network.f5.bigip</span> <span class="kn">import</span> <span class="n">HAS_F5SDK</span>
    <span class="kn">from</span> <span class="nn">library.module_utils.network.f5.bigip</span> <span class="kn">import</span> <span class="n">F5Client</span>
    <span class="kn">from</span> <span class="nn">library.module_utils.network.f5.common</span> <span class="kn">import</span> <span class="n">F5ModuleError</span>
    <span class="kn">from</span> <span class="nn">library.module_utils.network.f5.common</span> <span class="kn">import</span> <span class="n">AnsibleF5Parameters</span>
    <span class="kn">from</span> <span class="nn">library.module_utils.network.f5.common</span> <span class="kn">import</span> <span class="n">cleanup_tokens</span>
    <span class="kn">from</span> <span class="nn">library.module_utils.network.f5.common</span> <span class="kn">import</span> <span class="n">fq_name</span>
    <span class="kn">from</span> <span class="nn">library.module_utils.network.f5.common</span> <span class="kn">import</span> <span class="n">f5_argument_spec</span>
    <span class="n">HAS_DEVEL_IMPORTS</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="c1"># Upstream Ansible</span>
    <span class="kn">from</span> <span class="nn">ansible.module_utils.network.f5.bigip</span> <span class="kn">import</span> <span class="n">HAS_F5SDK</span>
    <span class="kn">from</span> <span class="nn">ansible.module_utils.network.f5.bigip</span> <span class="kn">import</span> <span class="n">F5Client</span>
    <span class="kn">from</span> <span class="nn">ansible.module_utils.network.f5.common</span> <span class="kn">import</span> <span class="n">F5ModuleError</span>
    <span class="kn">from</span> <span class="nn">ansible.module_utils.network.f5.common</span> <span class="kn">import</span> <span class="n">AnsibleF5Parameters</span>
    <span class="kn">from</span> <span class="nn">ansible.module_utils.network.f5.common</span> <span class="kn">import</span> <span class="n">cleanup_tokens</span>
    <span class="kn">from</span> <span class="nn">ansible.module_utils.network.f5.common</span> <span class="kn">import</span> <span class="n">fq_name</span>
    <span class="kn">from</span> <span class="nn">ansible.module_utils.network.f5.common</span> <span class="kn">import</span> <span class="n">f5_argument_spec</span>
</pre></div>
</td></tr></table></div>
<p>In 90% of cases, this code is boilerplate and you can ignore it when writing a module.
The <code class="docutils literal notranslate"><span class="pre">f5ansible</span></code> command takes care of this for you.</p>
<p>Let’s take a moment to walk through some of the things you see here and explain their
purpose.</p>
<div class="section" id="ansiblemodule-import">
<h2>AnsibleModule import<a class="headerlink" href="#ansiblemodule-import" title="Permalink to this headline">¶</a></h2>
<p>This import is at line #1 above.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansible.module_utils.basic</span> <span class="kn">import</span> <span class="n">AnsibleModule</span>
</pre></div>
</div>
<p>This import makes available to the module all of the utilities and convenience functions that Ansible provides to modules written in Python.</p>
<p>This module is defined <a class="reference external" href="https://github.com/ansible/ansible/blob/2f36b9e5ce0ec41a822752845d3b7c4afdf7eee9/lib/ansible/module_utils/basic.py#L801">in Ansible here</a>. This code will change over time, so you may need
to visit the file location itself on Ansible’s <code class="docutils literal notranslate"><span class="pre">devel</span></code> branch.</p>
<p>All F5 modules should include this line because it is used in the body of the <code class="docutils literal notranslate"><span class="pre">main()</span></code>
method of the module. Its purpose is to consume the module’s <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code> class and
provide back to the module a list of parameters that have been parsed and verified to meet
the spec.</p>
</div>
<div class="section" id="env-fallback-import">
<h2>env_fallback import<a class="headerlink" href="#env-fallback-import" title="Permalink to this headline">¶</a></h2>
<p>This import is at line #2 above.</p>
<p>This import is used by any modules that support a <code class="docutils literal notranslate"><span class="pre">partition</span></code> argument. Its purpose is to
provide access to environment variables for parameters to “fall back” to in the event that
the parameter is not provided directly to the module.</p>
<p>Normally, all of these environment fallbacks are defined in the F5 <code class="docutils literal notranslate"><span class="pre">common.py</span></code> module util
file. The partition one is the exception though, because it is <strong>not</strong> a common parameter.</p>
<p>Consider APIs of the BIG-IP that change system-level resources, like SSHD configuration or the
management IP of the BIG-IP. Modules like these have no reason to offer a <code class="docutils literal notranslate"><span class="pre">partition</span></code>
parameter to the user. Therefore, <code class="docutils literal notranslate"><span class="pre">partition</span></code> is not common across <em>all</em> modules, and is
not included in the <code class="docutils literal notranslate"><span class="pre">common.py</span></code> module utils. Each module that can use a partition is
expected to define that parameter in its <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code>.</p>
</div>
<div class="section" id="various-helper-import">
<h2>Various helper import<a class="headerlink" href="#various-helper-import" title="Permalink to this headline">¶</a></h2>
<p>These imports are the other imports that remain outside of the import <code class="docutils literal notranslate"><span class="pre">try</span></code> block. In this
module, that means line #3.</p>
<p>Modules can make use of a number of helper libraries that ship with Ansible. This module
makes use of the <code class="docutils literal notranslate"><span class="pre">iteritems</span></code> function to provide dictionary iteration that is compatible
across both Python 2.x and 3.x.</p>
<p>This illustrates another concern that modules have; that they should support older and newer
Python versions.</p>
<p>This commitment enables the users of F5 modules to gradually move off of older Python versions
over time.</p>
</div>
<div class="section" id="has-devel-imports-definition">
<h2>HAS_DEVEL_IMPORTS definition<a class="headerlink" href="#has-devel-imports-definition" title="Permalink to this headline">¶</a></h2>
<p>This import happens on or around line #5. In this module’s case, it happens exactly at
line #5.</p>
<p>When working with an Ansible module, there is a convention that constant-like things be
defined in all capital letters. This is seen in most situations when the module author is
interested in checking that an import happened, or did not happen.</p>
<p>The same thinking applies here.</p>
<p>The F5 module developers maintain a side-band repository that contains all of the F5 module
code. In fact, the documentation you’re reading is maintained in there, and you cloned that
side-band repository to work on the module in this tutorial.</p>
<p>Due to the way the developers structure their code, they want to be able to do all of the
module development without requiring that they move all of their code directly to Ansible.</p>
<p>This variable is defined so that they can know (during debugging) that they are indeed
importing code from their side-band repository, and not from the Ansible installation that
is on their system.</p>
<p>By default, this value is <code class="docutils literal notranslate"><span class="pre">False</span></code>. It assumes that you are <em>not</em> running from the
side-band codebase. This value is set to boolean <code class="docutils literal notranslate"><span class="pre">True</span></code> when you are. Which leads us
to the next import area.</p>
</div>
<div class="section" id="the-dev-prod-import-try-block">
<h2>The dev/prod import try block<a class="headerlink" href="#the-dev-prod-import-try-block" title="Permalink to this headline">¶</a></h2>
<p>This series of imports start at, or around, line #7 and continues for some time. In this
module’s case, it starts at line #7 and continues to line #33.</p>
<p>This large block of imports is actually a couple of things.</p>
<p>First, remember back to the previous section where the <code class="docutils literal notranslate"><span class="pre">HAS_DEVEL_IMPORTS</span></code> was first
defined. The first set of imports in this <code class="docutils literal notranslate"><span class="pre">try</span></code> block is the module’s attempts to load
those.</p>
<p>The reason that the modules tries its development libraries first is that, were the developers
to try to import the second block, the second block would <strong>always</strong> succeed. This is because
the second block’s imports are always defined; they are part of Ansible.</p>
<p>However, the developers need to test and do their development. So the module tries to
import the development code (part of the side-band repository) first. This allows the
developers to do their work without messing up anything in their installed copy of Ansible.
It also allows them to do work in their own side-band source repository. Otherwise, they
would need to do development directly in the Ansible repository.</p>
<p>When Ansible ships, this code will fail to import, but that’s not a problem. The module
will catch this failing behavior, and instead, try to import what it considers to be the
<em>production</em> imports. In other words, what comes installed with Ansible. This is nearly
always guaranteed to succeed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This may fail when a newer copy of the module is run on an older copy of
Ansible. In this case, the older copy may be missing things that were defined in the
newer Ansible. The F5 modules should always be run on the newest version of Ansible
to prevent this from occurring.</p>
</div>
</div>
<div class="section" id="what-is-imported-in-the-try-block">
<h2>What is imported in the try block?<a class="headerlink" href="#what-is-imported-in-the-try-block" title="Permalink to this headline">¶</a></h2>
<p>These try blocks are a mixture of support libraries that the Ansible module will use.
Most of these libraries are standard across all F5 modules. Also, you’ll notice that
the actual imported things are nearly identical, except for the path leading up to them.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">library.module_utils.network.f5.bigip</span> <span class="kn">import</span> <span class="n">HAS_F5SDK</span>
</pre></div>
</div>
<p>versus:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansible.module_utils.network.f5.bigip</span> <span class="kn">import</span> <span class="n">HAS_F5SDK</span>
</pre></div>
</div>
<p>In both cases, the <code class="docutils literal notranslate"><span class="pre">HAS_F5SDK</span></code> variable is attempted to be imported. It is the location
of this variable that changes. The first attempt is in the side-band repository. The
second attempt is in Ansible core.</p>
</div>
<div class="section" id="key-imports-to-recognize">
<h2>Key imports to recognize<a class="headerlink" href="#key-imports-to-recognize" title="Permalink to this headline">¶</a></h2>
<p>Some of the imports that are made are <em>crucial</em> for the module to execute correctly. The
imports and their purposes are outlined below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Imported item</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HAS_F5SDK</span></code></p></td>
<td><p>This variable that tells the module if the f5-sdk was found on your
Ansible controller. This variable may be overridden shortly in a
subsequent import check.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">F5Client</span></code></p></td>
<td><p>This variable contains a connection to your F5 device (BIG-IP,
BIG-IQ, etc).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">F5ModuleError</span></code></p></td>
<td><p>This is a general purpose <code class="docutils literal notranslate"><span class="pre">Exception</span></code> class that all F5 modules
use when something “bad” happens in them. It is raised for
situations when F5 is aware that something troubling can happen.
F5 does not catch, nor raise, Python’s base <code class="docutils literal notranslate"><span class="pre">Exception</span></code> exception
because this may suppress problems that occur that we are <em>not</em>
aware of. The developers want to be identified of those unknowns.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AnsibleF5Parameters</span></code></p></td>
<td><p>This is a base class for the <code class="docutils literal notranslate"><span class="pre">Parameters</span></code> class that is used by
all modules. This class includes methods for handling common F5
things such as the method by which the <code class="docutils literal notranslate"><span class="pre">Parameters</span></code> class
auto-creates properties for you.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cleanup_tokens</span></code></p></td>
<td><p>This method is used by all modules to clean up the authentication
tokens that are created during a module’s run. If token cleanup is
not done, this can wedge your BIG-IP after hundreds of tokens have
accumulated.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fq_name</span></code></p></td>
<td><p>This is a convenience method. Give a <code class="docutils literal notranslate"><span class="pre">partition</span></code> and a <code class="docutils literal notranslate"><span class="pre">name</span></code>.
It will return a <code class="docutils literal notranslate"><span class="pre">name</span></code> that is “fully qualified,” i.e., includes
the partition. This is helpful in situations where users can
specify a name which, itself, is a fully qualified name. For
example, inputs of <code class="docutils literal notranslate"><span class="pre">foo</span></code> and <code class="docutils literal notranslate"><span class="pre">/Common/foo</span></code> would both return
<code class="docutils literal notranslate"><span class="pre">/Common/foo</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">f5_argument_spec</span></code></p></td>
<td><p>This returns the base set of arguments that all modules can consume.
This is usually combined with module specific arguments to form the
final <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>The import block at the top of each module has a number of useful things injected into the module.</p>
<p>The next section skips down to the bottom of the file and begins exploring some of the common classes of a module. <code class="docutils literal notranslate"><span class="pre">ArgumentSpec</span></code> will be the first class we visit.</p>
</div>
</div>


    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../../_static/js/bootstrap.min.js"></script>
  <script src="../../../_static/js/clouddocs.js"></script>
  </body>
</html>